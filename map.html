<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <title>疫情可视化</title>

    </head>
    <body>
        <div id="main" style="width: 600px;height:400px;border: 1px solid red;margin: 100px auto;"></div>
        <script src="./js/echarts.min.js"></script>
        <script src="./js/map/china.js"></script>
        <script type="text/javascript">
    
            let container = document.getElementById('main')
            var myChart = echarts.init(container);
              
            fetch('./data.json').then(res=>res.json()).then(res=>{
                let data = res.map(r=>{
                   return{
                       name:r.provinceShortName,
                       value:r.currentConfirmedCount,
                   }
                })
            
            //fetch('./data.json').then(res=>res.json()).then(data=>{console.log(data)})
            // 指定图表的配置项和数据
            var option = {
                title:{
                    text:"疫情地图",
                    textStyle:{
                        fontSize:30
                    },
                    subtext:"111",
                    left:"center",
                    padding:15,
                },
                visualMap:{
                    pieces:[
                        {gte:10000,color:"#8B0000",label:'>9999'},
                        {gte:1000,lt:10000,color:"#FF0000",label:'1000-9999'},
                        {gte:100,lt:1000,color:"#FF4500",label:'100-999'},
                        {gte:10,lt:100,color:"#FF7F50",label:'10-99'},
                        {gt:0,lt:10,color:"#F4A460",label:'1-9'},
                        {value:0,color:"#fff",label:'0'},
                    ]
                },
                tooltip:{},
                series:[
                    {
                        name:"现有确诊",
                        type:'map',
                        map:"china",
                        data
                    },
                ]
            };
    
            // 使用刚指定的配置项和数据显示图表。
            myChart.setOption(option);})
        </script>
    </body>
</html>